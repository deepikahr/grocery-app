workflows:
  store-release:
    name: Release App to Playstore and Apple Store
    max_build_duration: 60
    environment:
      vars:
        ENV_FILE: Encrypted(Z0FBQUFBQmZKUDVoOVNjZXJhRGpXcUYxQW9qYXMybU52azlJaXNnMWdxbF9kcFhEcHlydXhsMVR3TUhlSVd3enpiazJuNmV5MG5WUUVIMnlqME1ST252MWhfa09wZEptOWxZNWItdl9lZEZmeWgzenp1ZW9mUDhJdWZLRWlEbUVPYmIzeHVFemM5a19wUEh4aXVWXzROc25CVHY3VkhZR1JnNzBuMlVRNlM4cnBCVzBTeXZKQXc0N0g0NlNqRlphSG9WdUNrODNaeFN4S1hTa0t4dkdLT2d6MUxXWWNEa2dYTUJaZWNXczd0YlNBbV84OWRLajFwd1BHTk1iX2hxeVhNMzZkQkthUnQ5UVQxQlZSNnBvc1RnZTdpMGVwdEJiUEZBSEJXMWdKQ0prX3p6TmJqVTF4Z3VNODJmNmVrY0xKNHpoZldjTW9DVkJoZUFkN3hrVHJSanJHY25WMFR2ZGZFcGJmVzRWZm5mS2szdkV5QzROUU5MbnNjWUtqYTJpOUhILXA3bEJtQmF6cWtUd0NFY3R0LXY4TGt6cGk4MU12VEN4cTFOc0ZIemxxdG9IeWw2MWsxaHloRWF2bDE1T29RNGxyQ0NuWTVvYnExaGZUY29lSUIxVU4xX3F4TXd1NHdITG82RnZfaERkZ3RWWHZEMTZxT3lBZm5NbkFDOTFpcldBeWhFb3Y0N1hzaV8zUXdPV1IzM18wTjNacGp0YUZPUFVRYWpmNjF2dGE3Y3UwOGpJOGxZQ2hZX3BwakFQcjBlaWJ5Smt2RTJTV1Rkb2JhQnFfVUdiR08yWXctRHlRb3Q3Y1hRRlJOMjlzY0lnTmt5X3VFeENXc0ZRTGQ4c3BRQ054dk0yVHF1aVFMNW4yTm85WGQwaUJ2dU1uSnpBN0NqUTAzNS1RS0lBeG8yOFVLRGpyUlk9)
        ANDROID_PACKAGE_NAME: com.ionicfirebaseapp.readymadegroceryuserapp
        IOS_PACKAGE_NAME: com.ionicfirebaseapp.readymadegroceryuserapp
        CERTIFICATE_PRIVATE_KEY: Encrypted(Z0FBQUFBQmZEVlM3NUhPR3lSM29KT29paXJWUW9XQk1KQ2lYV2dtckNISUVtZ3FuLWRKcEI3bWRBdWRNOHJIUEhISEFFeEpfOU5VeDFkOERISTNzU05TZndXRl9vOTlZR3NoMFNJUlJPOGxEc0JvYkdUWGx0blZQVU1FbEhaaGZMaGtlb01nZW5OaGhPR0x2MC1aZ19kWFRVcUxlZlhDbkRTMDNTbzIwa1U3Yy1maHRSRGNnOVNRb2JKVHlTWXFpM0pKLXk1UGF3LWIwV2plVU1oWnJpS3N1Qk1kdlFwMjhhS0ZpbThsSHhEaHF3cnNCUUp0Zk9scmpuLThQM2lLVWNYX29qUllTSDd3eGFBQVhzcWlMYi0tcXJkbjFKendyTHFUVk9IbW5FYjFsZjdNUUgxVWp5aUU4TTV2YWdzZGo4b1BMNFJJY0xnTktrT0dTSVIwd013XzdlazlJLW5nUkJ2R09wODV0VVhaOEFlT1gyN1cyYVpBSVBXd3U5azFlY19rT3paZ1kyVklFRl9IRVdaWGthaU1GTndVYTJsa2tOcS1ad0ZfQVF1cDROQnU4QnRaQXkxamVwWHh5MkxRT2NUbVNaRFB4cWFRUS1sc1pHUTBXcGh4ZlM2N2U3VTVlQ1lLUW41SWE0c04wOWIxZExjcjVlRVhwTTRhSXJFRFB1WGtOcGdjbmVUQ3pfR3UyUTFvUWZvRWoxNzhBRW5Oek55ZlY1ZWtYOG1SVi1kbE1XcUY5Z2dDeUZ6eWRFc05qRTI2WXV1V3dCSTZydUFSdHJIX3ZhbWFGVV96RjRRbzlXNVBEaGp3bm5ZYlhVb1ZncExXNXhlb3ZPbW1uT1h6RF9NTFQ1NmRURlhUNjNKRW03emx1VlM4LTV3VjhqdGxNaC1vaW1mNHdLYmNWR1l6akxJSENhaDNhU2I4SGpRVnM4YkFObnZydUxYMjFsb2pTVS1VZlV2MUNONFZwX1dHeW9VS3kwXzdZbmdnakFCQmNhT1o0TDl2V3JieWNpc2lvdkxyZDNFbWZIZ0U1a1E5czdlbk5aUzVjcS1ETkd1OV90bXp2NWFodEt1X1paNGlwSnBKSWsyWEszSEFaM00zZUpHRUV6QjEwLXZ4QWNxVzh6SmEteC1mNG5HR3dwNzV3UTdCVzlBc2M0ZXVKQXBPc1BOOFYtRDlQMldWSUwwWk9MUm40dTNNWUxXNnA1WUs0SGlkd1N0WW1rdnFWM3d1S09FSkVsZV9ZVHJYbTNGVWJXdGFKX1NVdlUtbmxHNUdENkYxbVdubG1NdkM3d1l4Y1FhUHhKODZsNG13S2JLeVAwOU9zdTBYcmlsWVNybTFBS0pLdUJYVElEQnlhZldadGozSU8zbG9JZTc3bHhVbEJRTXM4U2Y1Y3RJVGdhdkZqMVlNWEhyMEJoV3ZVaWM4TmlzeTRZUGhXRElFSHgwYVZKdGVxTTVDVnhKLVpuRXFTR3kzTWsxcERtRzlSZC1YWlhZNEVQMVN6QkpDcWp1Tm9zaklTbF9pWWZ0aFBrcXlXRURtSGJxVHdBS0RVNVRHUVNadWJPb25aYnc2a3BVTWhOLVEzRkxJckxWSVJOeGMwLWJUSGNheEpteEZSbkt0Ty1uSUlGSXZnaFRIalhTd0Y0YS1NSXZVa2xialJueDBVblpfSXYyRmFSRFZQUWlUWXBORmhKUVF2VHpKOUtvYXVrWURiMjQzMlZLMzg2TWkweEN2MjVYTzcyUHJSVjVrMm9ja0xIOHlveGZPbm13TEpxVVlzQmRxTnpESnlrVV9aUWNYZEJDWG56UkRyMzNsaGpHN05Ya3lxRjlxTlNXLVhwSWpjN1U5bFd2SUVVSzhYclgyY09naEl5UWxMcGpDZjVYREp4eXJVV09kRl9zTXVfekUzQmJHQzJHV3I3MDdURFBqTHFQTVNYMGVmSFZrN2UxT3VWUUNxQ3N6R0JCY3d5TWhNU2FkMnd1TjBhay1GWDBCUmU5dHZVLVBiUVFwcGtRVFhhclREaEp5RjBfcU92TU42NXRpdXp5b042b1k5ZWJrVmFGQnFpeGZhcnB1THNHTGItdWlFTXJOQ1hlLTlsa2VuREF1cWNEWW1ZN2h2cXFIZ25Yd3pzTGpGaXhTUlg4Y2w1Wm1kRFVsX29MMW9ZNUVHSnpBal9QV3hCbXJDVFAtRzNGYmpsd2JRbHlGVGEyUlZrcVl6Z25uODBhZG1DWmdKamlmVGYtSlhkdVNDckpmeFRsTklLdFRNWF8yV2tmYjlvNUQ0dlE4WDY3bVpsNXRUQ0d6YndjTlBHUU5aTjRZOFByTVY1WTVTSzk3aFE0Nm5tQm03bktjNWp1cE5KRFEyYXhMWHo0amxaNEVFVGNXak1iTzF6X0F6aDVTTjA1SUxOdTdLMXM4TWxDNGpUN3BadG1jNnFuaHR1WGp4U243eGNaUW13MkJvVm8xRVpNZzVQR2Utbm5vNHQ4QW5RMFpuTVFiM2M4cVFoN0libUlrTXBjcHdSS1NGcG5RSzl2OS0zbWZKTUlZTjBvR2dYWk12QzExRGh2Y21Xa0l0OXBuSEhkV2VHa04yc05fSHpldUVKNHlKX0M3SXJtcVcwYld1VXVjRGNFVDNWV2VRR0x5bkRzQlNvM3FxMHRTY3FNMk5YVU4xSGFPM1VyVFM0RGMxbk9XTjhTSGRBOEp1bFNtVGFSQ2Rma1R2UGRIYzNWWmY3WHNoSkJJYmJ2NGFDZEpSQVRFOV9zQTlrRlB2STllajJGVWlhLVdOZ3VfMGtJVTFJTC1hN2Z3MDFCaDhvNDdKNFdvaVlpaVFPX1RTZVAzcmJSRXBoMW11c3E0OElQRnBjQmQ3aEVqb215LTZJVFFxejJYMFozNTVaYjRCbENOOEJja0QtcUZSUjhmMHFnVDBNaDlWM2JfQW8yakhEVnBZWUY5Zkk3YzJNOXlIVHhoMFB6Z0l0Y1hmYnZsckR0cFU2LWJCeGNabHlXWFNvcXJNT05YR2FsdlFYXzlQa2M1X09GZEk4cTE4cjV6Zk1lanEteGRWRmpmOVpTaU10d01Bb3ZJU3lVYXh4MVVBXzk4VUFlSlUzV1Ba)
        APP_STORE_CONNECT_ISSUER_ID: Encrypted(Z0FBQUFBQmZEVlM3VVY5SmNuWU0ySVotWEc0VDJLR1NSbmdIVERKcGJPZ01rRVBzRzdrSC0xQmZHSmd2NS01NkRDUHRWRnNLS0NPRU5Vend5OVNjWnd1OU9HSVdyNThNUEthLWFPXzVubDJKUUpuMjFfZmFPa3N1alRxLWs2Q05ZVF91VHdlUUlWY0Q=)
        APP_STORE_CONNECT_KEY_IDENTIFIER: Encrypted(Z0FBQUFBQmZEVlM3LUxLeWpCVmJoRUF3RGMtamlhRzZkcmQ4a2IzLTc1bERuMTFHM0xxOTRYTXk0R1RDQXFCcmU5Vi0zT05wQV9GXzAzR1ZDSXhVTGpBVWRYZ0U3dUd6blE9PQ==)
        APP_STORE_CONNECT_PRIVATE_KEY: Encrypted(Z0FBQUFBQmZEVlM3RHliZ2d0US1QSFFxODA4U215OW9UeXo2UU16T2YwUDVjdVlsamRFZXV1NTFhQzNHa1N4MlRfR3dfZW5abmptdC1Ed2ZSeU56X09ZNlN5el8xUGc1ZHptZWNSaVBvYm9IYUwwalowR0w0eTNLZHJIdnlqQ1RhaFBzZUsxdlhVSHBkSHY1U0JtZkFJOEhyRDc0eEsxLVUyR3phLWRNUktJTEROa1BkNUd4cmJPUVJYMjdZVHB2ZEo3bS1UNjVCNHllNUZZZWJxck1Idmc3RWNPZ25TNFNXRDJoc1FrZE1oUVZ1TlZOSmJwSlBzWlA3ZEhGNUYxdHpyaDQ3U0lwbW1OSXhwSzVmWEdVSUxUU19JekllSXVXSXhKSVZXMGg0TlBBWEZEUFlxLVhyazZCUUV5andiVWwzVF9BYVZfbklKNWtXNXU5bkZnR3VPZTYtemdObEtfWHlfVkhEaGdfRTNtZWFUWWFKWVAxcFJ6STJsV0lVYVpzYjkzcVJxdFZXZ3pySHR6ZVBvOUo5MVBrWjlhSEh6Z0o2aHF0U2liMnZuZ3FGNnduNkpJNjJpUT0=)
      flutter: v1.14.6
      xcode: latest
      cocoapods: 1.8.4
    cache:
      cache_paths: []
    triggering:
      events:
        - push
      branch_patterns:
        - pattern: release
          include: true
          source: true
    scripts:
      - echo $ENV_FILE  | base64 --decode > .env
      - source .env
      - export APPLICATION_NAME=$APPLICATION_NAME; export GOOGLE_MAP_API_KEY=$GOOGLE_MAP_API_KEY; export LC_CTYPE=C; export LANG=C;
      - cp lib/assets/splash.png android/app/src/main/res/drawable/splash.png
      - find ios/Runner/AppDelegate.swift -type f -exec sed -i '.original' "s|GOOGLE_MAP_API_KEY|$GOOGLE_MAP_API_KEY|g" {} \;
      - find ios/Runner/info.plist -type f -exec sed -i '.original' "s|<string>APPLICATION_NAME</string>|<string>$APPLICATION_NAME</string>|g" {} \;
      - find ios/Runner.xcodeproj -type f -exec sed -i '.original' "s|com.ionicfirebaseapp.readymadegroceryuserapp|$IOS_PACKAGE_NAME|g" {} \;
      - find android/app/build.gradle -type f -exec sed -i '.original' "s|com.ionicfirebaseapp.readymadegroceryuserapp|$ANDROID_PACKAGE_NAME|g" {} \;
      - find android/app/src/main/AndroidManifest.xml -type f -exec sed -i '.original' "s|com.ionicfirebaseapp.readymadegroceryuserapp|$ANDROID_PACKAGE_NAME|g" {} \;
      - find android/app/src/debug/AndroidManifest.xml -type f -exec sed -i '.original' "s|com.ionicfirebaseapp.readymadegroceryuserapp|$ANDROID_PACKAGE_NAME|g" {} \;
      - find android/app/src/profile/AndroidManifest.xml -type f -exec sed -i '.original' "s|com.ionicfirebaseapp.readymadegroceryuserapp|$ANDROID_PACKAGE_NAME|g" {} \;
      - find android/app/src/main/kotlin/com/example/demoaddressmap/MainActivity.kt -type f -exec sed -i '.original' "s|com.ionicfirebaseapp.readymadegroceryuserapp|$ANDROID_PACKAGE_NAME|g" {} \;
      - flutter packages pub get
      - flutter pub run flutter_launcher_icons:main
      - flutter build appbundle --target-platform android-arm,android-arm64,android-x64
      - find . -name "Podfile" -execdir pod install \;
      - keychain initialize
      - app-store-connect fetch-signing-files "$PACKAGE_NAME" --type IOS_APP_STORE
        --create
      - keychain add-certificates
      - flutter build ios --release --no-codesign
      - xcode-project use-profiles
      - xcode-project build-ipa --workspace "ios/Runner.xcworkspace" --scheme "Runner"
    artifacts:
      - build/**/outputs/**/*.apk
      - build/**/outputs/**/*.aab
      - build/**/outputs/**/mapping.txt
      - build/ios/ipa/*.ipa
      - /tmp/xcodebuild_logs/*.log
      - flutter_drive.log
    publishing:
      email:
        recipients:
          - pietechsolution@gmail.com
          - kakadiyasandip4world@gmail.com
          - chandra@pietechsolution.com
          - ujjwal.2518@gmail.com
          - montyvipul@gmail.com
          - nitish.k@pietechsolution.com
      app_store_connect:
        app_id: "1506920690"
        apple_id: pietechsolution@gmail.com
        password: Encrypted(Z0FBQUFBQmZEVlM4cm1pdzR5TGVqZ3NQU0wxVmZ0ZDNCLS1SVTA5T0l4dGNkU1JrSGtxWDUyODRjMjJSelVKRTFPRWk4SkZCN3ZQUFdWRkgwdEp4My13MjRaSWtKS0xwT292eEp1YXVhNmt6SXdqd0JVSzExRHA4OXJVSUJnU1htUzBHcWVXOEdVcVI=)
      google_play:
        credentials: Encrypted(Z0FBQUFBQmZEVlM4MUFGX0RjVHIzLUl0LTU5YnF1a2xZOTVIZlMxZFNMYVN6NTlVdm5nSU82ZloyRmo2bmttakkyOVlQREFpanFqTDNGV092ZHVqOXlFRGRlT1NmVThOR0VpMzhkcnpkRzRya01BcjRUd2ktRjV3bEpvQnhKQU5lY3FtbjRCeUpCOV9ZRl95aU5paDVkdm5ITmxQTXdHSFBIZmFHck5aeXVGQ0xlOE9JdFVXVGhTd2hsWWZTMjR2SUJoQy1rc0d0YTNyZ3F1ZmpiVDItNldoM3BoclpZSkVXVzNvYUhldk4taGJFUWZJZWRQWENXT0plQ3A4ZmJSVXN4REktTVhSTGF1M2RjWlp6M194Zk9xVzlYQUxFbG4wbGxrUDUxcUItSkJna25RcVVSVUdNek44TEVlbGdZQWJ4dDZoWFZxd2ljOEdnZG9WY290cTFxYnR1S2NmZ3hPeWdWaTkzTkctamh5WVIwWkowTUtyRFpUOXdzck5GdjZibFdUd2Rza3ZmLUNKSUN3UjEzdzVYd3RQRUt3M2Z5LUZXaHcyZXJMYUNtVmQ3dDN3UUN1RDA0aEQyckpfa01TR01GVW1pRlZINlBmVVgzV3BIZGJJUUVtWDJEVmVuVTFPZ29lVlZOOC1BTGphMDR2TmVWNDZlRjhGRFh2V0p3akJjSGc4akpCeGFpYTBzYWtkSzNMUnZjUC16OGltM1BhMUc0eFM3UjVXX0sya2QxMmFjSVlnb1V4MWhXYzllYUticVpaVnRoenNZUDB5Z2Y2eEhiRVh6RGVHei1LVl96bmE4LTVBMXZhaVN1a011d2I3eXF4bjZZTFY4MDNmX2Z3TkVtYTNlaEdGZXJ2YlkySDdIcE93UGNXZmd2TWdtcXNiOVhIZXYtSVBnaUJpb3paQXk3bHVEeFYzSGVJeFRpcHVHbnk5cXoyblpVZTBiTlR1UDJndExzdm5uMGhuMHA2dWJIbG05a0xBQ2dTVTNHNkJ3VWxXd2NwUktES254QXRLdGhKeVRHVEd0dzhWazVLd1hhR2NnMVNObXQwWFlKRk1VZUZ6QVpnMWdENjY0VVBhaE1oNndWU3JaTm1faVBJemRhWF84bWJ1TjJPTzd2dGVTN05tS0pMc2s4eFRxbjYtQndNblNvQlpxUWxFaXRSX3JDc2hZLW4tZWZfcEFlVmhhUXlEQi1uYURhWUpKei1yZEl2eVVjVlFNN1BUUndRazBWTjZUMmE4TVVHMTZoVXlMTzZUV2QxbWcyQVVyUFVIWEJFcmoxbHd4a2tqS2NvUDhEU3hjazRMWlBaNG54LWxYbFlnWHFMemFjcXdsNWhMQ2tyaVRoaERDZzFrNVNhSzBwc1dwMHFJbzRRMmJFdlFWcVdhMmhMbEVUcHk1NF90S01ZWlFfY21HVHdIVmx2WVZ5aU9yY3d2X2VWeGdxek5JaTZvVVFlNl9lQ25lMHJXRE5yMDd3RnRjaUJjY1hwbXJrQUtvb2dXcThhU2dyLUxoRWRSeHZHM0kyY0NrVVFYWDgza2NIaUJZTXh2U2dXOTN3a0NyazkzTDhxampoNDRQTHRtS2lhRW1mU2hlcVdhbWhhbnVVUEpHd3lNS0JtQnlsT1c1djljM2RsTGx3X3VJWkNJOXYtVWlwdkxjUkdEX3dTUmpmNkZOOHRWeThtNWxoWGNLdEFmZ0NBZm1nTHhvSmg4MW5rSEd0TUE4WkVZdUdHOGpDOWFWZHd6SF9EQW1wUDJqZXZKVnlpX040Wmg5Q1o2YXR2dWIybDJkbnVlTUhsd3kydU5CcUNiY1ZtTXZObEpjM2RuTFROVWQzZ3VONkppUDlJWG9lTl9lQmhxcEItZFNMWTVQV1hKOElyZWZReWZydDFEM3M2Um1rOTJtY1l4RktpYk9vcGZQOVp2TVRhRTVobmFJX3l2NHFYTXB4WGlBb2JLSkt5RkFDSDFsenZsMzY1S095a0h2YWgyTENHWE83LWxCbUhpUlduN2NXUDM0a2k3YTZIaFlVYlpqWC05SzhxVDFsaGJpVldRWHkxdTZlVUVFSEN5RmNxS1prdHE4WVJqNEhRaTVPdTVNSmtfdEduMHEtd1B5cnBHZzZBV05IeGFYckk2aTU0eDl5SGZyZHRnS250UU4zNFRET2VjZFNTY05ZbXc4RFdnUl83YmlnbnBtOGFrY1NFQkRBSVRxTzBiSUxiX1F5eEY3aHk0dU5pRW1Ra2hIM3owS01BczYwYm1TVkFZVzRINkVubm9wM1JNbTFZRGItc0xmZ0wzY2ZBbWhzajRxNS14VzBwc0sxN1ZMRTI1VGJkTGJPUFctZEt5bjV4TEZsejA5a1VZdXJMcWdYZlRxOWhKckdWbVlISmFCc2xjLTJLcVRTbzg3R3BQZm1kU05ld3BLcE5wZGd3Y0lLWXNlS3hRMFFUeDZ5S3JhNDhUb1pSbnRnRnRpZ1VKSTJLQlZrNnZYVzU1NUlmSDlrX193XzNnNVJlNnJkZGladDZSMmNGemd2WjIzT0JueG9ranBVVzRtS3BKVHE1NlZ5OElXT2RtS2UyYkQ2dGZ4cnVhVGQ3bXRscWM0OTFjczktYUM1ZXg5ZVZGX1J5a0djcWZPYnNiZmF3R3RfODV6WV9jRFktcHR4M0tNWk1aSWtNU1pXZUx6WG84YUdtdy1SN1BRcC1MQ2NpMWRaSVJjckxiZmlNVkJfM3NEaWNJS004eF9OdWxfcHg1cXFhdzZUYkZMMWlYdTdzTzJtY0RkRmlha3JtQ1NGNVV3N0hFeWhTbDdaZy11VHV1ZV9yY2UxRVBoQmpzRl9QWHJ5ZnJ2UXl4cWRzS2plQ28xSVdjdHZYeFhUQVlWbTZXYnhVOVVZZXlYdXR1aUNtNko4U1lMZzlEcllQMTJOOUNCV2NnSEx3d0FfN0xvOGNrbjAtVjN1M3JsQk9pUlhRb2MtYTM0WFp0YWxvZU9hLTZLTUZTSUs2LUhpYTJScTJhTHdoSTJLWnVIMWE3MUdhbGhOOXVMUzJWODBFZ0FkajJVMlhMVzkwMERqYmNLLW9wc1RDSklCVXNfZzlHMzJCZERZRVpPaGFCZWxvcjFXUGI3U3ZLbGstY1VrdWJfcVhiaTN4aDN0R21rcnhaWTY3WU1yakNEWTBFNk9PYzBnY2xJU1BnZTBCWTF1VlZJS0NlT1RWVm44LXNIM25CWDhOYy1XU01nSjFOLWliSXV1WGpfWk5fclBEWFd0ZzFrTktTZ2N1M25GYU0wOXlBUDJsZlNMaldEUk9QclNfVTRoOHRDYWdETnV5cy1pQkRIRVVBWDBSMUN0cnBrdHNRcHE1UGRNVENCdnFEVk9FQTBtZ2JyeHdWeTdJcm8yM2JlMDlhNThRTU0xRnhtRjVZOUNnM2VSeXZaQlFVQ3RVSlpPbUFpcTVpMVp2MTdTaEszekZ0UEF2VjA5NG1Bd2lKYjJ0ZldtUE1zWWtPT1JBS3JXR0xuY19WMlB3VS1wWG1IM3p2T2VVRUNOM2RlU1pOQjRWTmJjclBTTGRhV2g0TkRVemdWNUdBQ2w3eE5qbzFVZ3Utd1ptSHZzakEtbmg2LW9EZXNZMkx5MmJwTHlTcXBLOXk3MmZqTkJEUEJ4QzNBOVZlczVoeE5nTHIwN0VSZVRFcUNFUkhvNzFLREsxMlBHVG5KSEdjMktpTnVFZENsSGQ3UzNpbUdrMVo0WFlqOFNDbzFOaVdmZWhHbS16TlpBdVQzSFNnVzRyczFWSTRtSzFJdXBzazRtRHZlUTluXzN2NGRpSElpQTl5SlhSU0syM0o4bVBXUHFmOUJEQVVnV3VJdnQ2V0JCRDRCcE5PREJraXA5bG1lNXdHSE1ocnh6RXlYTm82dWs3VnhCdEZDSTk1clluM0o4d2dsZENrank4SGxHdURoakFZT1o0MDRyQ0hTbzBubjVaQjI2eXotQ2RXbVZEb1IteVF1bURaOHpQTDd3TGxGT2p3NjE1OEVFSE1DNWJDUkpaVDhrbVI1SjFTNld6QWhHMTluSndDcWpnT0VGY3R2XzlNeWVOTGFIazVFcWZVVjJHNkhwMEx6LW5Bb1JfM0ZOYjM5OFBWUWtUX2M2Y3ltaS1aeFVZNWlkVDVjbUZleEJfMV9rOWk4M21mWDg1d3BDZzJUYmNIM21vc3daX1hTSHNJZjc3a0V1dFhGQjRRdEZnalVxdnBqY2dfRlF0Z0stTGNtMFRZUXFnM1U0QmtvQlRsYTNpcHhuYTNWdUZLX19JSzJ6UEVyOEFfMmJsWVBfTjc3clNnNE5FTUZtZmNmNnUzb1k5ajBnPT0=)
        track: production

  testing-apk:
    name: Send Test Apk to given mails
    max_build_duration: 60
    environment:
      flutter: v1.14.6
      xcode: latest
      cocoapods: 1.8.4
      vars:
        ENV_FILE: Encrypted(Z0FBQUFBQmZKUU04QVR5QXhXRXQ2MEZlQWEyU2ZfWC1XSDhQb0MtZERYWmVhYjFCU0l2UG5LTmVRSkR1S0NaNkh6eTktWm5SbUUxLTdrYW84RUd3ZTNyZTg4anFQZVhDY09qOWxadGl2UDZkXzBuQXVpclFNOGRvcnZNS2FaUWNOX3JtSlpVZTZ2UGw5eEdxcm1GeHAxcnZfTkRRZkRyRVZYejdZTmhCSjUyWE0zZGNxTTFkNFJSRS1adWcxb0tsazRmV0x6WEVOUXphQy1TZ1RCS1NhLXBDWUZTb3pUSEhXSnowLURsMFJodXFVMWxGWVRoX2J2Ynh5aHhtQTF5dkNqMWRLMzB2NHc5My01SDlicFY4U3hVSUVlaXlxaDF0TzI3bk9hTERuRUVySGRoLWJLcXFHbGR2TG1XbXZGZ0FDSkZHZy1LWlpzdGZ6dnFYOU5BektkZE1wR3FYNGpmSlVfWldVdXp3b0dtRDN4dkV4TFBfWkUtT1RsRF8yOHFicXJzWkFfNW1tUHU2cU42SHhSZXdRelhTM25iMllkRzJ0Z1pyME9iY3RFTzlLN0xZVDM4OGlqb0hHWGdaYnJ5TGdQd3lrNWFBZ3dYa18zRkJWWFgxZU04c2tZejNUMkdqS1FLTTFWWll1d3l2dWlRZEh0VGZUbjY3ZlRacWxFZ1c3bW54VlR2T1pPZDBYaXc0UTh6M2xENmFxUDU0XzhzNF9JSzB1NXNLR09BSVRTbmpzWGJaNDZ0UHlfZUp6dGNleHFxOVV0b19TZWM5RnpDREs2WTNSR0lQc24tNmRyWmF0WVg1QUhjRWhmNGE0T1Y4bGFwaWs1ZUZjN3RUZUwyM2dkOUZhWUdMVjc1dWZJMmh4OF9UUGIzRW5NVnk1Q0pXMkVTeWxMVFBXQ01GNmNCWDdwV1g2bE09)
        ANDROID_PACKAGE_NAME: com.ionicfirebaseapp.readymadegroceryuserapp
        IOS_PACKAGE_NAME: com.ionicfirebaseapp.readymadegroceryuserapp
    cache:
      cache_paths: []
    triggering:
      events:
        - push
      branch_patterns:
        - pattern: testing
          include: true
          source: true
    scripts:
      - echo $ENV_FILE  | base64 --decode > .env
      - source .env
      - export APPLICATION_NAME=$APPLICATION_NAME; export GOOGLE_MAP_API_KEY=$GOOGLE_MAP_API_KEY; export LC_CTYPE=C; export LANG=C;
      - cp lib/assets/splash.png android/app/src/main/res/drawable/splash.png
      - find ios/Runner/AppDelegate.swift -type f -exec sed -i '.original' "s|GOOGLE_MAP_API_KEY|$GOOGLE_MAP_API_KEY|g" {} \;
      - find ios/Runner/info.plist -type f -exec sed -i '.original' "s|<string>APPLICATION_NAME</string>|<string>$APPLICATION_NAME</string>|g" {} \;
      - find ios/Runner.xcodeproj -type f -exec sed -i '.original' "s|com.ionicfirebaseapp.readymadegroceryuserapp|$IOS_PACKAGE_NAME|g" {} \;
      - find android/app/build.gradle -type f -exec sed -i '.original' "s|com.ionicfirebaseapp.readymadegroceryuserapp|$ANDROID_PACKAGE_NAME|g" {} \;
      - find android/app/src/main/AndroidManifest.xml -type f -exec sed -i '.original' "s|com.ionicfirebaseapp.readymadegroceryuserapp|$ANDROID_PACKAGE_NAME|g" {} \;
      - find android/app/src/debug/AndroidManifest.xml -type f -exec sed -i '.original' "s|com.ionicfirebaseapp.readymadegroceryuserapp|$ANDROID_PACKAGE_NAME|g" {} \;
      - find android/app/src/profile/AndroidManifest.xml -type f -exec sed -i '.original' "s|com.ionicfirebaseapp.readymadegroceryuserapp|$ANDROID_PACKAGE_NAME|g" {} \;
      - find android/app/src/main/kotlin/com/example/demoaddressmap/MainActivity.kt -type f -exec sed -i '.original' "s|com.ionicfirebaseapp.readymadegroceryuserapp|$ANDROID_PACKAGE_NAME|g" {} \;
      - flutter packages pub get
      - flutter pub run flutter_launcher_icons:main
      - flutter packages pub get
      - flutter build apk --release
    artifacts:
      - build/**/outputs/**/app-release.apk
      - build/**/outputs/**/mapping.txt
      - flutter_drive.log
    publishing:
      email:
        recipients:
          - pietechsolution@gmail.com
          - kakadiyasandip4world@gmail.com
          - chandra@pietechsolution.com
          - ujjwal.2518@gmail.com
          - montyvipul@gmail.com
          - nitish.k@pietechsolution.com
